#!/usr/bin/env ruby
#
# This is an interactive Ruby shell (IRB) for Rumai.
#
#
# Usage:
#
#   rumai [Options] [STUFF_FOR_IRB]
#
#   STUFF_FOR_IRB : Arguments and options for `irb`.
#
#
# Options:
#
#   -h, --help    : Show this message and exit.
#
#   -v, --version : Show version number and exit.
#

require 'rumai'

# parse command line
if ARGV.delete('-h') or ARGV.delete('--help')
  # try to display UNIX version of help manual
  man_path = File.join(Rumai::INSTDIR, 'man')
  unless system 'man', '-M', man_path, '-a', 'rumai'
    # try to display HTML version of help manual
    man_html = man_path + '.html'
    unless %w[$BROWSER open start].any? {|b| system "#{b} #{man_html}" }
      # no luck; direct user to project website
      puts "See #{Rumai::WEBSITE}"
    end
  end
  exit
elsif ARGV.delete('-v') or ARGV.delete('--version')
  puts Rumai::VERSION
  exit
end

# start IRB session
require 'rumai/irb'
require 'irb/completion'

IRB.start_session Rumai
